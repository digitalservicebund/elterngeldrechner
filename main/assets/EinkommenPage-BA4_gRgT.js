import{a as k,b as a,k as u,Y as j,E as p,r as h,j as e,u as x,P as T,f as g,s as F,m as y}from"./index-DPo_heNS.js";import{u as A,h as B,F as D,i as I,Y as O,E as b}from"./Monatsplaner-BtFO3Gro.js";import{S as P,a as S}from"./Split-CWYoBJN8.js";import{B as M}from"./ButtonGroup-BnI4oyV-.js";import"./egr-configuration-BkWsa5ZA.js";function v({initialValues:r,onSubmit:m,handleDirtyForm:n}){const l=k(),i=A({defaultValues:r}),{isDirty:s,dirtyFields:o,errors:c}=i.formState,d=a(u.getAntragssteller),{ET1:t,ET2:E}=a(u.getElternteilNames),N=a(u.getAlleinerziehend)===j.YES?p.MAX_EINKOMMEN_ALLEIN:p.MAX_EINKOMMEN_BEIDE,f=()=>l("/erwerbstaetigkeit");return h.useEffect(()=>{n(s,o)},[s,o,n]),e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-10",children:"Ihr Einkommen"}),e.jsx(B,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(m),noValidate:!0,children:[e.jsx(D,{"data-testid":"egr-anspruch",description:`Hatten Sie im Kalenderjahr vor der Geburt ein Gesamteinkommen von mehr als ${N.toLocaleString()} Euro?`,info:I.einkommenLimitÃœberschritten,children:e.jsx(O,{register:i.register,registerOptions:{required:"Dieses Feld ist erforderlich"},name:"limitEinkommenUeberschritten",errors:c,required:!0})}),e.jsxs(P,{children:[e.jsx(S,{children:e.jsx(b,{elternteil:"ET1",elternteilName:t})}),d==="FuerBeide"&&e.jsx(S,{hasDivider:!0,children:e.jsx(b,{elternteil:"ET2",elternteilName:E})})]}),e.jsx(M,{onClickBackButton:f})]})})]})}function z(){const r=x(),m=k(),n=a(t=>t.stepEinkommen),[l,i]=h.useState(!1),[s,o]=h.useState({}),c=t=>{(l||t.ET1.bruttoEinkommenNichtSelbstaendig.type!==n.ET1.bruttoEinkommenNichtSelbstaendig.type||t.ET2.bruttoEinkommenNichtSelbstaendig.type!==n.ET2.bruttoEinkommenNichtSelbstaendig.type)&&r(F.setHasBEGResultChangedDueToPrevFormSteps({ET1:Object.hasOwn(s,"ET1")||t.ET1.bruttoEinkommenNichtSelbstaendig.type!==n.ET1.bruttoEinkommenNichtSelbstaendig.type,ET2:Object.hasOwn(s,"ET2")||t.ET2.bruttoEinkommenNichtSelbstaendig.type!==n.ET2.bruttoEinkommenNichtSelbstaendig.type})),r(y.submitStep(t)),m(g.elterngeldvarianten.route)},d=(t,E)=>{i(t),o(E)};return e.jsx(T,{step:g.einkommen,children:e.jsx(v,{initialValues:n,onSubmit:c,handleDirtyForm:d})})}export{z as default};
