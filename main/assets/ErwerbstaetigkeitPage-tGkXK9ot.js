import{r as b,j as e,Y as g,i as p,a as G,b as f,k as x,u as M,P as A,f as j,s as $,l as D}from"./index-DPo_heNS.js";import{f as N,F as h,e as k,i as S,Y as E,C as q,u as V,h as C}from"./Monatsplaner-BtFO3Gro.js";import{S as J,a as T}from"./Split-CWYoBJN8.js";import{B as y}from"./ButtonGroup-BnI4oyV-.js";import"./egr-configuration-BkWsa5ZA.js";const F={isNichtSelbststaendig:"Einkünfte aus nichtselbständiger Arbeit",isSelbststaendig:"Gewinneinkünfte"};function P({elternteil:t}){var n;const{register:l,getValues:i,formState:{errors:a}}=N(),r=b.useMemo(()=>({validate:{requireErwerbstaetigkeit:o=>{const c=i(`${t}.isNichtSelbststaendig`);return!!o||c||"Bitte wählern sie eine Erwerbstätigkeit aus."}}}),[i,t]);return e.jsxs(h,{description:"Ich hatte in diesem Zeitraum…",children:[e.jsx(k,{register:l,registerOptions:{deps:[`${t}.isSelbststaendig`]},name:`${t}.isNichtSelbststaendig`,label:F.isNichtSelbststaendig,errors:!!((n=a[t])!=null&&n.isSelbststaendig),info:S.erwerbstaetigkeitNichtSelbststaendig}),e.jsx(k,{register:l,registerOptions:r,name:`${t}.isSelbststaendig`,label:F.isSelbststaendig,errors:a,info:S.erwerbstaetigkeitGewinneinkuenfte})]})}const w={MiniJob:"Ja",MehrAlsMiniJob:"Nein"},I=[{value:"MiniJob",label:w.MiniJob},{value:"MehrAlsMiniJob",label:w.MehrAlsMiniJob}];function v({elternteil:t,elternteilName:l,antragssteller:i}){const{register:a,formState:{errors:r},watch:n,reset:o,getValues:c}=N(),u=n(`${t}.vorGeburt`),s=n(`${t}.isNichtSelbststaendig`),d=n(`${t}.isSelbststaendig`),m=n(`${t}.mehrereTaetigkeiten`);return b.useEffect(()=>{u===g.NO&&(t==="ET1"&&o({...c(),ET1:{...p,vorGeburt:g.NO}}),t==="ET2"&&o({...c(),ET2:{...p,vorGeburt:g.NO}}))},[t,o,u,c]),e.jsxs(e.Fragment,{children:[e.jsx(h,{headline:i==="FuerBeide"?l:"",description:"Waren Sie in den 12 Monaten vor der Geburt Ihres Kindes erwerbstätig?",children:e.jsx(E,{register:a,registerOptions:{required:"Dieses Feld ist erforderlich"},name:`${t}.vorGeburt`,errors:r,required:!0})}),u===g.YES&&e.jsxs(e.Fragment,{children:[e.jsx(P,{elternteil:t}),!!s&&!d&&e.jsxs(e.Fragment,{children:[e.jsx(h,{description:"Bestand Ihre nichtselbständige Arbeit aus mehreren Tätigkeiten?",children:e.jsx(E,{register:a,registerOptions:{required:"Dieses Feld ist erforderlich"},name:`${t}.mehrereTaetigkeiten`,errors:r,required:!0})}),m===g.NO&&e.jsxs(e.Fragment,{children:[e.jsx(h,{description:"Waren Sie in den 12 Monaten vor der Geburt Ihres Kindes sozialversicherungspflichtig?",children:e.jsx(E,{register:a,registerOptions:{required:"Dieses Feld ist erforderlich"},name:`${t}.sozialVersicherungsPflichtig`,errors:r,required:!0})}),e.jsx(h,{description:"Hatten Sie Einkommen aus einem Mini-Job?",info:S.minijobsMaxZahl,children:e.jsx(q,{register:a,registerOptions:{required:"Dieses Feld ist erforderlich"},name:`${t}.monatlichesBrutto`,errors:r,options:I,required:!0})})]})]})]})]})}function R({initialValues:t,onSubmit:l,handleDirtyForm:i}){const a=G(),r=V({defaultValues:t}),{handleSubmit:n,reset:o,getValues:c}=r,{isDirty:u,dirtyFields:s}=r.formState,d=f(x.getAntragssteller),{ET1:m,ET2:O}=f(x.getElternteilNames),B=()=>a("/nachwuchs");return b.useEffect(()=>{i(u,s)},[u,s,i]),b.useEffect(()=>{d!=="FuerBeide"&&o({...c(),ET2:p})},[o,d,c]),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"mb-10",children:["Erwerbstätigkeit",d==="EinenElternteil"?" *":""]}),e.jsx(C,{...r,children:e.jsxs("form",{onSubmit:n(l),noValidate:!0,children:[e.jsxs(J,{children:[e.jsx(T,{children:e.jsx(v,{elternteil:"ET1",elternteilName:m,antragssteller:d})}),d==="FuerBeide"&&e.jsx(T,{hasDivider:!0,children:e.jsx(v,{elternteil:"ET2",elternteilName:O,antragssteller:d})})]}),e.jsx(y,{onClickBackButton:B})]})})]})}function W(){const t=M(),l=G(),i=f(s=>s.stepErwerbstaetigkeit),[a,r]=b.useState(!1),[n,o]=b.useState({}),c=s=>{(a||s.ET1.vorGeburt!==i.ET1.vorGeburt||s.ET2.vorGeburt!==i.ET2.vorGeburt)&&t($.setHasBEGResultChangedDueToPrevFormSteps({ET1:Object.hasOwn(n,"ET1")||s.ET1.vorGeburt!==i.ET1.vorGeburt,ET2:Object.hasOwn(n,"ET2")||s.ET2.vorGeburt!==i.ET2.vorGeburt})),t(D.submitStep(s)),l(j.einkommen.route)},u=(s,d)=>{r(s),o(d)};return e.jsx(A,{step:j.erwerbstaetigkeit,children:e.jsx(R,{initialValues:i,onSubmit:c,handleDirtyForm:u})})}export{W as default};
